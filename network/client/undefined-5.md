---
description: 각 플레이어 간 효과 정보(데미지 등)를 주고 받는 것의 동기화 방법입니다
---

# 효과 정보 동기화

참고 : 효과 정보 동기화는 동기화 이슈가 크게 발생하지 않는 한 후순위로 작업합니다 

## 효과 정보를 따로 동기화해야 하는 이유 

Magimaker는 캐릭터 행동을 각 클라이언트가 선 적용하고 적용 내용을 타 클라이언트가 후적용하는 방식을 취합니다   
그러다 보니 아래 그림과 같은 동기화 이슈가 생길 수 있습니다 

![&#xD328;&#xD0B7; &#xC804;&#xC1A1; &#xB51C;&#xB808;&#xC774;&#xC5D0; &#xB530;&#xB978; &#xB3D9;&#xAE30;&#xD654; &#xC774;&#xC288; &#xAC00;&#xB2A5;&#xC131;](../../.gitbook/assets/image%20%286%29.png)

이렇게 각 클라이언트끼리 판정이 다를 수 있기 때문에 동기화가 필요합니다 

## 효과 정보 동기화 

효과 정보를 동기화하기 위해선 어느 한 곳을 기준으로 동기화해야 합니다   
한 곳에서 동기화하지 않을 경우 아래와 같이 중복 판정이 일어나 효과 계산이 꼬이는 등 문제가 생길 수 있습니다

![&#xAC01; &#xD074;&#xB77C;&#xC774;&#xC5B8;&#xD2B8;&#xC5D0;&#xC11C; &#xBAA8;&#xB4E0; &#xCDA9;&#xB3CC; &#xD310;&#xC815;&#xC744; &#xACC4;&#xC0B0;&#xD560; &#xB54C; &#xBB38;&#xC81C;&#xC810;  ](../../.gitbook/assets/image%20%288%29.png)

중복 판정 문제를 막기 위해선 어느 한 곳에서 판정을 해야합니다   
판정 기준 2가지를 생각할 수 있습니다 

1. 각 클라이언트마다 자신이 조종하는 캐릭터와 관련된 정보를 판정합니다 
2. 서버\(호스트\) 등 고정 기준점에 맞춰 판정합니다 

Magimaker에서는 각 플레이어 캐릭터 효과 판정에 대해선 \(1\)의 방식을, 나머지 효과 판정에 대해선 \(2\)의 방식을 사용합니다  

### 각 클라이언트마다 판정 

각 클라이언트가 자신이 조종하는 캐릭터와 관련된 정보를 판정합니다   
이렇게 판정할 때 좋은 점은 '각 클라이언트가 자신이 조종하고 있는 캐릭터에 대해선 합리적으로 느끼기 쉽다'입니다   
ex\) 내 캐릭터가 때렸음이 다른 클라이언트에선 적용이 안 됐어도 내 클라이언트에 맞춰서 때렸음이 인정되기 때문에 내 입장에선 판정에 문제없다고 느낌 

자신이 조종하는 캐릭터와 관련된 정보는 2가지로 생각해볼 수 있습니다   
1. 내 캐릭터가 상대에게 준 효과 정보   
2. 내 캐릭터가 받은 효과 정보   


### 서버\(호스트\) 기준으로 판정 

던전의 함정으로 몬스터가 피해를 입는 경우를 생각해보겠습니다   
이 경우 특정 플레이어가 피해를 입힌 건 아니기 때문에 각 클라이언트마다 판정할 수 없습니다   


